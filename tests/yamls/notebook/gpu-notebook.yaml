kind: notebook
version: v0.1

job:
  name: gpu-notebook
  priority: high
  description: "带GPU的Notebook，用于深度学习模型开发"

environment:
  image: jupyter/tensorflow-notebook:2023-12-25
  command: ["jupyter", "lab", "--ip=0.0.0.0", "--port=8888", "--no-browser", "--allow-root", "--NotebookApp.token=jupyter-gpu-token"]
  env:
    - name: CUDA_VISIBLE_DEVICES
      value: "0"
    - name: NVIDIA_DRIVER_CAPABILITIES
      value: "compute,utility"
    - name: NVIDIA_REQUIRE_CUDA
      value: "cuda>=11.8"

resources:
  pool: dev-pool
  gpu: 1
  gpu-type: a10-24g
  cpu: 8
  memory: 32Gi
  gpu-share: 2Gi

storage:
  workdirs:
    - path: /home/jovyan/work
    - path: /data
    - path: /models